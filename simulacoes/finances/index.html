<!doctype html><html lang=pt class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Um mergulho não tão profundo na mente de um humano..."><link href=https://cristianobam.github.io/calculo-numerico/simulacoes/finances/ rel=canonical><meta name=author content="Cristiano Moraes Bilacchi Azarias"><link rel="shortcut icon" href=../../docs/assets/favicon.svg><meta name=generator content="mkdocs-1.1.2, mkdocs-material-5.4.0"><title>Finanças Simuladas - Sinapses</title><link rel=stylesheet href=../../assets/stylesheets/main.545621a7.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.36d1b78f.min.css><meta name=theme-color content=#cddc39><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style><link rel=stylesheet href=../../stylesheets/extra.css></head> <body dir=ltr data-md-color-scheme=preference data-md-color-primary=lime data-md-color-accent=lime> <script>matchMedia("(prefers-color-scheme: dark)").matches&&document.body.setAttribute("data-md-color-scheme","slate")</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#financas-simuladas-edos class=md-skip> Ir para o conteúdo </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=https://cristianobam.github.io/calculo-numerico/ title=Sinapses class="md-header-nav__button md-logo" aria-label=Sinapses> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M64 224h13.5c24.7 56.5 80.9 96 146.5 96s121.8-39.5 146.5-96H384c8.8 0 16-7.2 16-16v-96c0-8.8-7.2-16-16-16h-13.5C345.8 39.5 289.6 0 224 0S102.2 39.5 77.5 96H64c-8.8 0-16 7.2-16 16v96c0 8.8 7.2 16 16 16zm40-88c0-22.1 21.5-40 48-40h144c26.5 0 48 17.9 48 40v24c0 53-43 96-96 96h-48c-53 0-96-43-96-96v-24zm72 72l12-36 36-12-36-12-12-36-12 36-36 12 36 12 12 36zm151.6 113.4C297.7 340.7 262.2 352 224 352s-73.7-11.3-103.6-30.6C52.9 328.5 0 385 0 454.4v9.6c0 26.5 21.5 48 48 48h80v-64c0-17.7 14.3-32 32-32h128c17.7 0 32 14.3 32 32v64h80c26.5 0 48-21.5 48-48v-9.6c0-69.4-52.9-125.9-120.4-133zM272 448c-8.8 0-16 7.2-16 16s7.2 16 16 16 16-7.2 16-16-7.2-16-16-16zm-96 0c-8.8 0-16 7.2-16 16v48h32v-48c0-8.8-7.2-16-16-16z"/></svg> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> Sinapses </span> <span class="md-header-nav__topic md-ellipsis"> Finanças Simuladas </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Buscar placeholder=Buscar autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header-nav__source> <a href=https://github.com/cristianobam/blog-post title="Ir ao repositório" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> cristianobam/blog-post </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://cristianobam.github.io/calculo-numerico/ title=Sinapses class="md-nav__button md-logo" aria-label=Sinapses> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M64 224h13.5c24.7 56.5 80.9 96 146.5 96s121.8-39.5 146.5-96H384c8.8 0 16-7.2 16-16v-96c0-8.8-7.2-16-16-16h-13.5C345.8 39.5 289.6 0 224 0S102.2 39.5 77.5 96H64c-8.8 0-16 7.2-16 16v96c0 8.8 7.2 16 16 16zm40-88c0-22.1 21.5-40 48-40h144c26.5 0 48 17.9 48 40v24c0 53-43 96-96 96h-48c-53 0-96-43-96-96v-24zm72 72l12-36 36-12-36-12-12-36-12 36-36 12 36 12 12 36zm151.6 113.4C297.7 340.7 262.2 352 224 352s-73.7-11.3-103.6-30.6C52.9 328.5 0 385 0 454.4v9.6c0 26.5 21.5 48 48 48h80v-64c0-17.7 14.3-32 32-32h128c17.7 0 32 14.3 32 32v64h80c26.5 0 48-21.5 48-48v-9.6c0-69.4-52.9-125.9-120.4-133zM272 448c-8.8 0-16 7.2-16 16s7.2 16 16 16 16-7.2 16-16-7.2-16-16-16zm-96 0c-8.8 0-16 7.2-16 16v48h32v-48c0-8.8-7.2-16-16-16z"/></svg> </a> Sinapses </label> <div class=md-nav__source> <a href=https://github.com/cristianobam/blog-post title="Ir ao repositório" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> cristianobam/blog-post </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. title=Início class=md-nav__link> Início </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2 type=checkbox id=nav-2 checked> <label class=md-nav__link for=nav-2> Simulações <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Simulações data-md-level=1> <label class=md-nav__title for=nav-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Simulações </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Finanças Simuladas <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg> </span> </label> <a href=./ title="Finanças Simuladas" class="md-nav__link md-nav__link--active"> Finanças Simuladas </a> <nav class="md-nav md-nav--secondary" aria-label=Índice> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Índice </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#introducao class=md-nav__link> Introdução </a> </li> <li class=md-nav__item> <a href=#o-problema class=md-nav__link> O Problema </a> <nav class=md-nav aria-label="O Problema"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1a-modelagem class=md-nav__link> 1ª Modelagem </a> </li> <li class=md-nav__item> <a href=#1a-modelagem-descontinuidades class=md-nav__link> 1ª Modelagem + Descontinuidades </a> </li> <li class=md-nav__item> <a href=#2a-modelagem class=md-nav__link> 2ª Modelagem </a> </li> <li class=md-nav__item> <a href=#3a-modelagem class=md-nav__link> 3ª Modelagem </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=Índice> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Índice </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#introducao class=md-nav__link> Introdução </a> </li> <li class=md-nav__item> <a href=#o-problema class=md-nav__link> O Problema </a> <nav class=md-nav aria-label="O Problema"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1a-modelagem class=md-nav__link> 1ª Modelagem </a> </li> <li class=md-nav__item> <a href=#1a-modelagem-descontinuidades class=md-nav__link> 1ª Modelagem + Descontinuidades </a> </li> <li class=md-nav__item> <a href=#2a-modelagem class=md-nav__link> 2ª Modelagem </a> </li> <li class=md-nav__item> <a href=#3a-modelagem class=md-nav__link> 3ª Modelagem </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <h1 id=financas-simuladas-edos>Finanças Simuladas - EDOs<a class=headerlink href=#financas-simuladas-edos title="Permanent link">&para;</a></h1> <div class=img-center> <p><a href=https://colab.research.google.com/github/Cristianobam/blog-post/blob/master/docs/simulacoes/FinancesSimulation.ipynb><img alt="Open In Colab" src=https://colab.research.google.com/assets/colab-badge.svg></a></p> <p><a href=https://nbviewer.jupyter.org/github/Cristianobam/blog-post/blob/master/docs/simulacoes/FinancesSimulation.ipynb><img alt="View the notebook" src=https://img.shields.io/badge/render-nbviewer-orange.svg></a></p> </div> <p><strong>**Disclaimer</strong></p> <p>Antes de mais nada, vale dizer que minha formação não é voltada para econômia. Mesmo que no curso de engenharia tenhamos disciplinas como engenharia econômica, ela não fornece uma visão macroscópica e nem o a base suficiente para criar modelos econômicos que se apliquem ao mercado financeiro. Tendo posto isso, esse post foca mais na utilização de equações diferenciais e suas interpretações assim como a programação matemática por trás.</p> <p>Durante o post e ao fim dele terão algumas referências para o aprofundamento em econômia de fato bem como os outros conceitos matemáticos. Vale ressaltar que esses modelos não devem ser levados ao pé da letra, mas nos trazem algumas intuições sobre o assunto.</p> <h2 id=introducao>Introdução<a class=headerlink href=#introducao title="Permanent link">&para;</a></h2> <p>Lembra do caso Bettina, "Oi, eu sou a Bettina e tenho 1 milhão e 42 mil reais em patrimônio acumulado..." ? Bem, esse tipo propaganda super apelativa fingem que a independência financeira é algo bem direto e fácil. Porém, não são. Esse caminho no geral envolve uma série de fatores a serem levados em consideração e que dificultam muito o raciocínio lógico.</p> <p>Nesse post, a ideia é tentar modelar esse problema econômico com um pouco de matemática e programação. Dessa forma, construiremos uma carteira financeira utilizando algumas equações diferenciais ordinárias (<strong>EDOs</strong>) e alguns scripts para integrar e visualizar as dinâmicas.</p> <h2 id=o-problema>O Problema<a class=headerlink href=#o-problema title="Permanent link">&para;</a></h2> <p>Na grande maioria dos problemas naturais podemos avaliá-los de duas maneiras diferentes.</p> <p>A primeira maneira é verificar, neste exemplo de uma carteira financeira, <em>quanto dinheiro temos num dado tempo</em>. A segunda maneira - e a que usaremos - é verificar <em>quanto o dinheiro muda com o tempo</em>. Dessa forma, sabendo a primeira derivada, <span><span class=MathJax_Preview>\frac{dx}{dt}</span><script type=math/tex>\frac{dx}{dt}</script></span>, e a condição inicial, <span><span class=MathJax_Preview>x_0 = x(0)</span><script type=math/tex>x_0 = x(0)</script></span>, conseguimos calcular os bens futuros. Assim, para encontramos <span><span class=MathJax_Preview>x(t)</span><script type=math/tex>x(t)</script></span> que satisfaça a nossa EDO, basta integramos</p> <div> <div class=MathJax_Preview>x(t) = \int_0^t \dfrac{dx}{dt} dt</div> <script type="math/tex; mode=display">x(t) = \int_0^t \dfrac{dx}{dt} dt</script> </div> <h3 id=1a-modelagem>1ª Modelagem<a class=headerlink href=#1a-modelagem title="Permanent link">&para;</a></h3> <p>Vamos começar com um caso simples. Nossas finanças são baseadas nos seguintes fatores:</p> <ul> <li>Nossa renda mensal, <span><span class=MathJax_Preview>r(t)</span><script type=math/tex>r(t)</script></span>.</li> <li>Todas as nossas despesas (contas, alimentação, moradia, etc), <span><span class=MathJax_Preview>d(t)</span><script type=math/tex>d(t)</script></span>.</li> <li>As taxas que você paga sobre o seu salário, <span><span class=MathJax_Preview>T(a)</span><script type=math/tex>T(a)</script></span>.</li> </ul> <p>Dessa forma podemos dizer que o seu ganho, i.e., a taxa com que você ganha ou perde dinheiro pode ser escrita como</p> <div> <div class=MathJax_Preview>\delta = r(t) - d(t) - T(a)</div> <script type="math/tex; mode=display">\delta = r(t) - d(t) - T(a)</script> </div> <p>Neste caso, <span><span class=MathJax_Preview>\delta</span><script type=math/tex>\delta</script></span> é o seu ganho. Assim, a EDO pode ser escrita como</p> <div> <div class=MathJax_Preview>\dfrac{dx}{dt} = \delta</div> <script type="math/tex; mode=display">\dfrac{dx}{dt} = \delta</script> </div> <p>Dados <span><span class=MathJax_Preview>r(t)</span><script type=math/tex>r(t)</script></span>, <span><span class=MathJax_Preview>d(t)</span><script type=math/tex>d(t)</script></span> e <span><span class=MathJax_Preview>T(a)</span><script type=math/tex>T(a)</script></span> constantes, podemos resolver integrando facilmente</p> <div> <div class=MathJax_Preview>\int_{x_0}^{x(t)} dx = \int_0^t \delta~dt \Rightarrow x(t) = \delta t + x_0</div> <script type="math/tex; mode=display">\int_{x_0}^{x(t)} dx = \int_0^t \delta~dt \Rightarrow x(t) = \delta t + x_0</script> </div> <p>Como mantemos tudo constante, nossa equação final será uma reta. Transformando a matemática em código teremos o seguinte:</p> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class=code><div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Carteira</span><span class=p>:</span>
    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>salario</span><span class=o>=</span><span class=mi>1600</span><span class=p>,</span> <span class=n>despesas</span><span class=o>=</span><span class=mi>500</span><span class=p>,</span> <span class=n>taxas</span><span class=o>=.</span><span class=mi>1</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>salario</span> <span class=o>=</span> <span class=n>salario</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>despesas</span> <span class=o>=</span> <span class=n>despesas</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>taxas</span> <span class=o>=</span> <span class=n>taxas</span>

    <span class=k>def</span> <span class=nf>ganho</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>t</span><span class=p>):</span>
        <span class=k>return</span> <span class=mi>12</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>salario</span>

    <span class=k>def</span> <span class=nf>gastos</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>t</span><span class=p>):</span>
        <span class=k>return</span> <span class=mi>12</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>despesas</span>

    <span class=k>def</span> <span class=nf>pagamentos</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>t</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>taxas</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>ganho</span><span class=p>(</span><span class=n>t</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>modelo</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>t</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>ganho</span><span class=p>(</span><span class=n>t</span><span class=p>)</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>gastos</span><span class=p>(</span><span class=n>t</span><span class=p>)</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>pagamentos</span><span class=p>(</span><span class=n>t</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>integrar</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>t_init</span><span class=p>,</span> <span class=n>t_end</span><span class=p>,</span> <span class=n>y0</span><span class=p>,</span> <span class=n>h</span><span class=o>=</span><span class=mf>0.001</span><span class=p>):</span>
        <span class=n>N</span> <span class=o>=</span> <span class=nb>int</span><span class=p>((</span><span class=n>t_end</span> <span class=o>-</span> <span class=n>t_init</span><span class=p>)</span> <span class=o>/</span> <span class=n>h</span><span class=p>)</span>
        <span class=n>x</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>linspace</span><span class=p>(</span><span class=n>t_init</span><span class=p>,</span> <span class=n>t_end</span><span class=p>,</span> <span class=n>N</span><span class=p>)</span>
        <span class=n>y</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>zeros</span><span class=p>(</span><span class=n>N</span><span class=p>)</span>
        <span class=n>y</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=n>y0</span>
        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>N</span><span class=o>-</span><span class=mi>1</span><span class=p>):</span>
            <span class=n>y</span><span class=p>[</span><span class=n>i</span><span class=o>+</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=n>y</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>+</span> <span class=n>h</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>modelo</span><span class=p>(</span><span class=n>x</span><span class=p>[</span><span class=n>i</span><span class=p>])</span>
        <span class=k>return</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span>
</code></pre></div> </td></tr></table> <p>Com um salário de 1600 reais, despesas de 500 reais e os descontos salariais de 10%, teremos a reta abaixo. Vale dizer que a granularidade temporal é de um ano. Para integrar a nossa EDO, ao invés de usar um pacote pronto, escrevemos a função <code class=highlight><span class=n>integrar</span><span class=p>()</span></code>. Essa função é a implementação do método de Euler para resolver EDOs - veja mais <a href=http://cristianobam.github.io/calculo-numerico/ >aqui</a>.</p> <div class=img-center> <img style=width:550px; src=../../assets/images/simulacoes/Modelo1.png> </div> <p>Parando para ver o nosso modelo, não faz sentido pensarmos que desde que nascemos ganhemos um salário. Além disso, todos queremos nos aposentar um dia. No nosso modelo, trabalhamos até morrer aos 100 anos. Bem, fica difícil viver até os 100 trabalhando desde o nascimento... Vamos introduzir isso ao modelo!</p> <h3 id=1a-modelagem-descontinuidades>1ª Modelagem + Descontinuidades<a class=headerlink href=#1a-modelagem-descontinuidades title="Permanent link">&para;</a></h3> <p>Como a integral é um operador linear - uma maneira bonitinha de dizer que a integral da soma é a soma das integrais. Dessa forma, é válido fazermos a seguinte operação:</p> <div> <div class=MathJax_Preview>x(t) = \int_{nascimento}^{t_1} \dfrac{dx}{dt}~dt + \int_{t_1}^{t_2} \dfrac{dx}{dt}~dt + \int_{t_2}^{morte} \dfrac{dx}{dt}~dt</div> <script type="math/tex; mode=display">x(t) = \int_{nascimento}^{t_1} \dfrac{dx}{dt}~dt + \int_{t_1}^{t_2} \dfrac{dx}{dt}~dt + \int_{t_2}^{morte} \dfrac{dx}{dt}~dt</script> </div> <p>Dessa forma teremos 3 momentos distintos nas nossas vidas</p> <ul> <li>Infância: quando somos dependentes dos nossos pais e não temos um salário e nem despesas.</li> <li>Vida Ativa: quando ganhamos, gastamos e pagamos taxas.</li> <li>Aposentadoria: quando não temos mais um salário, mas ganhamos uma aposentadoria que é menor que o nosso salário. Além disso ainda temos despesas e taxas.</li> </ul> <p>Nosso código muda um pouco. Vamos acrescentar essas descontinuidades ao ganho e aos gastos. Para integrar esse modelos agora, definimos uma função simulação. Nela executamos integramos passo a passo cada um dos estágios.</p> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44</pre></div></td><td class=code><div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Carteira</span><span class=p>:</span>
    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>salario</span><span class=o>=</span><span class=mi>1600</span><span class=p>,</span> <span class=n>despesas</span><span class=o>=</span><span class=mi>500</span><span class=p>,</span> <span class=n>taxas</span><span class=o>=.</span><span class=mi>1</span><span class=p>,</span>
<span class=hll>                <span class=n>aposentadoria</span><span class=o>=</span><span class=mi>1000</span><span class=p>,</span> <span class=n>atividade</span><span class=o>=</span><span class=mi>18</span><span class=p>,</span> <span class=n>descanso</span><span class=o>=</span><span class=mi>70</span><span class=p>):</span>
</span>        <span class=bp>self</span><span class=o>.</span><span class=n>salario</span> <span class=o>=</span> <span class=n>salario</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>despesas</span> <span class=o>=</span> <span class=n>despesas</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>taxas</span> <span class=o>=</span> <span class=n>taxas</span>
<span class=hll>        <span class=bp>self</span><span class=o>.</span><span class=n>aposentadoria</span> <span class=o>=</span> <span class=n>aposentadoria</span>
</span><span class=hll>        <span class=bp>self</span><span class=o>.</span><span class=n>atividade</span> <span class=o>=</span> <span class=n>atividade</span>
</span><span class=hll>        <span class=bp>self</span><span class=o>.</span><span class=n>descanso</span> <span class=o>=</span> <span class=n>descanso</span>
</span>
<span class=hll>    <span class=k>def</span> <span class=nf>ganho</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>t</span><span class=p>):</span>
</span><span class=hll>        <span class=k>if</span> <span class=n>t</span> <span class=o>&lt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>atividade</span><span class=p>:</span>
</span><span class=hll>            <span class=k>return</span> <span class=mi>0</span>
</span><span class=hll>        <span class=k>elif</span> <span class=bp>self</span><span class=o>.</span><span class=n>atividade</span> <span class=o>&lt;=</span>  <span class=n>t</span> <span class=o>&lt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>descanso</span><span class=p>:</span>
</span><span class=hll>            <span class=k>return</span> <span class=mi>12</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>salario</span>
</span><span class=hll>        <span class=k>else</span><span class=p>:</span>
</span><span class=hll>            <span class=k>return</span> <span class=mi>12</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>aposentadoria</span>
</span>
<span class=hll>    <span class=k>def</span> <span class=nf>gastos</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>t</span><span class=p>):</span>
</span><span class=hll>        <span class=k>if</span> <span class=n>t</span> <span class=o>&lt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>atividade</span><span class=p>:</span>
</span><span class=hll>            <span class=k>return</span> <span class=mi>0</span>
</span><span class=hll>        <span class=k>else</span><span class=p>:</span>
</span><span class=hll>            <span class=k>return</span> <span class=mi>12</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>despesas</span>
</span>
    <span class=k>def</span> <span class=nf>pagamentos</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>t</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>taxas</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>ganho</span><span class=p>(</span><span class=n>t</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>modelo</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>t</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>ganho</span><span class=p>(</span><span class=n>t</span><span class=p>)</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>gastos</span><span class=p>(</span><span class=n>t</span><span class=p>)</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>pagamentos</span><span class=p>(</span><span class=n>t</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>integrar</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>t_init</span><span class=p>,</span> <span class=n>t_end</span><span class=p>,</span> <span class=n>y0</span><span class=p>,</span> <span class=n>h</span><span class=o>=</span><span class=mf>0.001</span><span class=p>):</span>
        <span class=n>N</span> <span class=o>=</span> <span class=nb>int</span><span class=p>((</span><span class=n>t_end</span> <span class=o>-</span> <span class=n>t_init</span><span class=p>)</span> <span class=o>/</span> <span class=n>h</span><span class=p>)</span>
        <span class=n>x</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>linspace</span><span class=p>(</span><span class=n>t_init</span><span class=p>,</span> <span class=n>t_end</span><span class=p>,</span> <span class=n>N</span><span class=p>)</span>
        <span class=n>y</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>zeros</span><span class=p>(</span><span class=n>N</span><span class=p>)</span>
        <span class=n>y</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=n>y0</span>
        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>N</span><span class=o>-</span><span class=mi>1</span><span class=p>):</span>
            <span class=n>y</span><span class=p>[</span><span class=n>i</span><span class=o>+</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=n>y</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>+</span> <span class=n>h</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>modelo</span><span class=p>(</span><span class=n>x</span><span class=p>[</span><span class=n>i</span><span class=p>])</span>
        <span class=k>return</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span>

<span class=k>def</span> <span class=nf>simulacao</span><span class=p>(</span><span class=n>carteira</span><span class=p>):</span>
    <span class=n>x0</span><span class=p>,</span> <span class=n>y0</span> <span class=o>=</span> <span class=n>carteira</span><span class=o>.</span><span class=n>integrar</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>carteira</span><span class=o>.</span><span class=n>atividade</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
    <span class=n>x1</span><span class=p>,</span> <span class=n>y1</span> <span class=o>=</span> <span class=n>carteira</span><span class=o>.</span><span class=n>integrar</span><span class=p>(</span><span class=n>carteira</span><span class=o>.</span><span class=n>atividade</span><span class=p>,</span> <span class=n>carteira</span><span class=o>.</span><span class=n>descanso</span><span class=p>,</span> <span class=n>y0</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>])</span>
    <span class=n>x2</span><span class=p>,</span> <span class=n>y2</span> <span class=o>=</span> <span class=n>carteira</span><span class=o>.</span><span class=n>integrar</span><span class=p>(</span><span class=n>carteira</span><span class=o>.</span><span class=n>descanso</span><span class=p>,</span> <span class=mi>100</span><span class=p>,</span> <span class=n>y1</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>])</span>
    <span class=k>return</span> <span class=n>np</span><span class=o>.</span><span class=n>concatenate</span><span class=p>((</span><span class=n>x0</span><span class=p>,</span><span class=n>x1</span><span class=p>,</span><span class=n>x2</span><span class=p>)),</span> <span class=n>np</span><span class=o>.</span><span class=n>concatenate</span><span class=p>((</span><span class=n>y0</span><span class=p>,</span><span class=n>y1</span><span class=p>,</span><span class=n>y2</span><span class=p>))</span>
</code></pre></div> </td></tr></table> <div class=img-center> <img style=width:550px; src=../../assets/images/simulacoes/Modelo1-1.png> </div> <p>Mesmo com a função <span><span class=MathJax_Preview>\frac{dx}{dt}</span><script type=math/tex>\frac{dx}{dt}</script></span> tendo uma série de descontinuidades, a função <span><span class=MathJax_Preview>x(t)</span><script type=math/tex>x(t)</script></span></p> <h3 id=2a-modelagem>2ª Modelagem<a class=headerlink href=#2a-modelagem title="Permanent link">&para;</a></h3> <p>Bem, a menos que sejamos alunos de iniciação científica, nós esperamos que o nosso salário aumente em função do tempo. Além disso, é fácil pensarmos que nossos gastos também aumentaram em função do tempo. </p> <div> <div class=MathJax_Preview>\begin{cases} r(t) = \alpha~t + r_0\\ d(t) = \beta~t + d_0\\ \end{cases}</div> <script type="math/tex; mode=display">\begin{cases}
r(t) =  \alpha~t + r_0\\
d(t) = \beta~t + d_0\\
\end{cases}</script> </div> <p>Neste caso, <span><span class=MathJax_Preview>\alpha</span><script type=math/tex>\alpha</script></span> é a taxa de aumento salarial, ou o reajuste salarial, e <span><span class=MathJax_Preview>\beta</span><script type=math/tex>\beta</script></span> o aumento das despesas, ou o reajuste de despesas. Agora nossa função <span><span class=MathJax_Preview>\delta</span><script type=math/tex>\delta</script></span> será dependente do tempo. Esta dependência temporal na derivada primeira trará um perfil quadrático na função <span><span class=MathJax_Preview>x(t)</span><script type=math/tex>x(t)</script></span>. </p> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49</pre></div></td><td class=code><div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Carteira</span><span class=p>:</span>
    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>salario</span><span class=o>=</span><span class=mi>1600</span><span class=p>,</span> <span class=n>despesas</span><span class=o>=</span><span class=mi>500</span><span class=p>,</span> <span class=n>taxas</span><span class=o>=.</span><span class=mi>1</span><span class=p>,</span>
                <span class=n>aposentadoria</span><span class=o>=</span><span class=mi>1000</span><span class=p>,</span> <span class=n>atividade</span><span class=o>=</span><span class=mi>18</span><span class=p>,</span> <span class=n>descanso</span><span class=o>=</span><span class=mi>70</span><span class=p>,</span>
<span class=hll>                <span class=n>alpha</span><span class=o>=</span><span class=mi>120</span><span class=p>,</span> <span class=n>beta</span><span class=o>=</span><span class=mi>80</span><span class=p>):</span>
</span>        <span class=bp>self</span><span class=o>.</span><span class=n>salario</span> <span class=o>=</span> <span class=n>salario</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>despesas</span> <span class=o>=</span> <span class=n>despesas</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>taxas</span> <span class=o>=</span> <span class=n>taxas</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>aposentadoria</span> <span class=o>=</span> <span class=n>aposentadoria</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>atividade</span> <span class=o>=</span> <span class=n>atividade</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>descanso</span> <span class=o>=</span> <span class=n>descanso</span>
<span class=hll>        <span class=bp>self</span><span class=o>.</span><span class=n>reajuste_salarial</span> <span class=o>=</span> <span class=n>alpha</span>
</span><span class=hll>        <span class=bp>self</span><span class=o>.</span><span class=n>reajuste_despesas</span> <span class=o>=</span> <span class=n>beta</span>
</span>
    <span class=k>def</span> <span class=nf>ganho</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>t</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>t</span> <span class=o>&lt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>atividade</span><span class=p>:</span>
            <span class=k>return</span> <span class=mi>0</span>
        <span class=k>elif</span> <span class=bp>self</span><span class=o>.</span><span class=n>atividade</span> <span class=o>&lt;=</span>  <span class=n>t</span> <span class=o>&lt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>descanso</span><span class=p>:</span>
<span class=hll>            <span class=k>return</span> <span class=mi>12</span> <span class=o>*</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>salario</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>reajuste_salarial</span>\
</span><span class=hll>                 <span class=o>*</span> <span class=p>(</span><span class=n>t</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>atividade</span><span class=p>))</span>
</span>        <span class=k>else</span><span class=p>:</span>
            <span class=k>return</span> <span class=mi>12</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>aposentadoria</span>

    <span class=k>def</span> <span class=nf>gastos</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>t</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>t</span> <span class=o>&lt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>atividade</span><span class=p>:</span>
            <span class=k>return</span> <span class=mi>0</span>
        <span class=k>else</span><span class=p>:</span>
<span class=hll>            <span class=k>return</span> <span class=mi>12</span> <span class=o>*</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>despesas</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>reajuste_despesas</span>\
</span><span class=hll>                 <span class=o>*</span> <span class=p>(</span><span class=n>t</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>atividade</span><span class=p>))</span>
</span>
    <span class=k>def</span> <span class=nf>pagamentos</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>t</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>taxas</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>ganho</span><span class=p>(</span><span class=n>t</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>modelo</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>t</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>ganho</span><span class=p>(</span><span class=n>t</span><span class=p>)</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>gastos</span><span class=p>(</span><span class=n>t</span><span class=p>)</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>pagamentos</span><span class=p>(</span><span class=n>t</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>integrar</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>t_init</span><span class=p>,</span> <span class=n>t_end</span><span class=p>,</span> <span class=n>y0</span><span class=p>,</span> <span class=n>h</span><span class=o>=</span><span class=mf>0.001</span><span class=p>):</span>
        <span class=n>N</span> <span class=o>=</span> <span class=nb>int</span><span class=p>((</span><span class=n>t_end</span> <span class=o>-</span> <span class=n>t_init</span><span class=p>)</span> <span class=o>/</span> <span class=n>h</span><span class=p>)</span>
        <span class=n>x</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>linspace</span><span class=p>(</span><span class=n>t_init</span><span class=p>,</span> <span class=n>t_end</span><span class=p>,</span> <span class=n>N</span><span class=p>)</span>
        <span class=n>y</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>zeros</span><span class=p>(</span><span class=n>N</span><span class=p>)</span>
        <span class=n>y</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=n>y0</span>
        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>N</span><span class=o>-</span><span class=mi>1</span><span class=p>):</span>
            <span class=n>y</span><span class=p>[</span><span class=n>i</span><span class=o>+</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=n>y</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>+</span> <span class=n>h</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>modelo</span><span class=p>(</span><span class=n>x</span><span class=p>[</span><span class=n>i</span><span class=p>])</span>
        <span class=k>return</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span>

<span class=k>def</span> <span class=nf>simulacao</span><span class=p>(</span><span class=n>carteira</span><span class=p>):</span>
    <span class=n>x0</span><span class=p>,</span> <span class=n>y0</span> <span class=o>=</span> <span class=n>carteira</span><span class=o>.</span><span class=n>integrar</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>carteira</span><span class=o>.</span><span class=n>atividade</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
    <span class=n>x1</span><span class=p>,</span> <span class=n>y1</span> <span class=o>=</span> <span class=n>carteira</span><span class=o>.</span><span class=n>integrar</span><span class=p>(</span><span class=n>carteira</span><span class=o>.</span><span class=n>atividade</span><span class=p>,</span> <span class=n>carteira</span><span class=o>.</span><span class=n>descanso</span><span class=p>,</span> <span class=n>y0</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>])</span>
    <span class=n>x2</span><span class=p>,</span> <span class=n>y2</span> <span class=o>=</span> <span class=n>carteira</span><span class=o>.</span><span class=n>integrar</span><span class=p>(</span><span class=n>carteira</span><span class=o>.</span><span class=n>descanso</span><span class=p>,</span> <span class=mi>100</span><span class=p>,</span> <span class=n>y1</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>])</span>
    <span class=k>return</span> <span class=n>np</span><span class=o>.</span><span class=n>concatenate</span><span class=p>((</span><span class=n>x0</span><span class=p>,</span><span class=n>x1</span><span class=p>,</span><span class=n>x2</span><span class=p>)),</span> <span class=n>np</span><span class=o>.</span><span class=n>concatenate</span><span class=p>((</span><span class=n>y0</span><span class=p>,</span><span class=n>y1</span><span class=p>,</span><span class=n>y2</span><span class=p>))</span>
</code></pre></div> </td></tr></table> <div class=img-center> <img style=width:550px; src=../../assets/images/simulacoes/Modelo2.png> </div> <p>Como podemos ver, a nossa função exibe o perfil quadrático que previmos anteriormente. Além disso, vemos grandes diferenças nos resultados das integrações. E bem, como estamos devendo, talvez seja hora de começarmos a investir para sairmos desse vermelho.</p> <h3 id=3a-modelagem>3ª Modelagem<a class=headerlink href=#3a-modelagem title="Permanent link">&para;</a></h3> <p>Agora chegou aquele momento de lembrarmos das aulas de engenharia econômica e da mágica dos juros compostos. A fórmula para isso é fácil</p> <div> <div class=MathJax_Preview>M = C\cdot(1+i)^n</div> <script type="math/tex; mode=display">M = C\cdot(1+i)^n</script> </div> <p>onde, <span><span class=MathJax_Preview>M</span><script type=math/tex>M</script></span> é o montante, <span><span class=MathJax_Preview>C</span><script type=math/tex>C</script></span> o capital inicial, <span><span class=MathJax_Preview>i</span><script type=math/tex>i</script></span> a taxa de juros compostos e <span><span class=MathJax_Preview>n</span><script type=math/tex>n</script></span> o período de aplicação. A "mágica" dos juros compostos na verdade é a aplicação de juros sobre juros, ou seja, é como se pegássemos tudo o que já ganhamos e investíssemos novamente sobre o mesmo regime de juros.</p> <p>Mas vamos lembrar que estamos trabalhando com EDOs, assim vamos tomar a derivada dessa equação:</p> <div> <div class=MathJax_Preview>\begin{cases} x(t) = x_0(1+i)^t\\ \dfrac{dx}{dt} = x_0(1+i)^t\ln{(R+1)} = x(t)\ln{(R+1)} \end{cases}</div> <script type="math/tex; mode=display">\begin{cases}
x(t) = x_0(1+i)^t\\
\dfrac{dx}{dt} = x_0(1+i)^t\ln{(R+1)} = x(t)\ln{(R+1)}
\end{cases}</script> </div> <p>Como podemos ver, a derivada da função juros composto é proporcional a ela mesma. </p> <p>Agora é onde tudo fica ainda mais interessante. Com essa nova equação diferencial podemos introduzir um fator investimento na nossa carteira. Todavia, ao invés de fixarmos um capital inicial, vamos disponibilizar um fator <span><span class=MathJax_Preview>\beta</span><script type=math/tex>\beta</script></span> do nosso dinheiro para ser investido, onde <span><span class=MathJax_Preview>\beta\in[0, 1]</span><script type=math/tex>\beta\in[0, 1]</script></span>. Dessa forma teremos a seguintes equações:</p> <div> <div class=MathJax_Preview>\begin{cases} \dot{x_1} = (1-\beta)~\delta\\ \dot{x_2} = \beta~\delta + x_2\ln{(1+R)} \end{cases}</div> <script type="math/tex; mode=display">\begin{cases}
\dot{x_1} = (1-\beta)~\delta\\
\dot{x_2} = \beta~\delta + x_2\ln{(1+R)}
\end{cases}</script> </div> <hr> <div class=md-source-date> <small> Última atualização: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">25 de novembro de 2020</span> </small> </div> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Footer> <a href=../.. title=Início class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Anterior </span> Início </div> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; Cristiano Moraes Bilacchi Azarias, 2020 </div> </div> <div class=md-footer-social> <a href=https://github.com/cristianobam target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://gitlab.com/Cristianobam target=_blank rel=noopener title=gitlab.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M105.2 24.9c-3.1-8.9-15.7-8.9-18.9 0L29.8 199.7h132c-.1 0-56.6-174.8-56.6-174.8zM.9 287.7c-2.6 8 .3 16.9 7.1 22l247.9 184-226.2-294zm160.8-88l94.3 294 94.3-294zm349.4 88l-28.8-88-226.3 294 247.9-184c6.9-5.1 9.7-14 7.2-22zM425.7 24.9c-3.1-8.9-15.7-8.9-18.9 0l-56.6 174.8h132z"/></svg> </a> <a href=https://linkedin.com/in/cristiano-moraes-bilacchi-azarias-572976a9/ target=_blank rel=noopener title=linkedin.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> <a href=https://instagram.com/cris_bilacchi target=_blank rel=noopener title=instagram.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg> </a> </div> </div> </div> </footer> </div> <script src=../../assets/javascripts/vendor.de50e36d.min.js></script> <script src=../../assets/javascripts/bundle.fc9c3121.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copiar para \u00e1rea de transfer\u00eancia", "clipboard.copied": "Copiado para \u00e1rea de transfer\u00eancia", "search.config.lang": "pt", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Digite para iniciar a busca", "search.result.none": "Nenhum resultado encontrado", "search.result.one": "1 resultado encontrado", "search.result.other": "# resultados encontrados"}</script> <script>
        app = initialize({
          base: "../..",
          features: ["tabs"],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.a68abb33.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.10.2/p5.min.js></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_SVG"></script> <script src=../../javascripts/final.js></script> </body> </html>